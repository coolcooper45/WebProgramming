<!DOCTYPE html>
<html lang="en">
<head>


    <!--Team: Paul Haines, Gabriel Shanahan, Peyton Whitefield-->

    
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css" integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body class="bg-primary vh-100">
    <div class="card col-6 offset-3 mt-5" id="divRegister">
        <div class="card-header d-flex justify-content-center">
            <h3>Create New Account</h3>
        </div>
        <div class="card-body">
            <form class="needs-validation" novalidate>
                <div class="mt-1">
                    <input class="form-control" id="txtEmail" type="email" aria-label="Enter Email Address" placeholder="Email Address" required>
                    <div class="invalid-feedback">Invalid email address.</div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtPassword" type="password" aria-label="Enter Password" placeholder="Password" required>
                    <div class="invalid-feedback">You Must Enter a valid Password</div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtFirstName" type="text" aria-label="First Name" placeholder="First Name" required>
                    <div class="invalid-feedback">Please Enter Your First name </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtLastName" type="text" aria-label="Last Name" placeholder="Last Name" required>
                    <div class="invalid-feedback">Please Enter Your Last name </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtStreet1" type="text" aria-label="Street Adress 1" placeholder="Street Adress 1" required>
                    <div class="invalid-feedback">Please enter an Street 1 </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtStreet2" type="text" aria-label="Street Adress 2" placeholder="Street Adress 2" required>
                    <div class="invalid-feedback">Please enter an Street 2 </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtCity" type="text" aria-label="City" placeholder="City" required>
                    <div class="invalid-feedback">Please enter City </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtState" type="text" aria-label="State" placeholder="State" required>
                    <div class="invalid-feedback">Please enter State </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtZIP" type="text" aria-label="ZIP Code" placeholder="ZIP Code" required>
                    <div class="invalid-feedback">Please enter a ZIP Code </div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtCOOP" type="text" aria-label="Unique COOP Code" placeholder="Unique COOP Code" required>
                    <div class="invalid-feedback">Please enter a COOP Code</div>
                </div>

                <input type="checkbox" id="myCheck">
                <label for="myCheck">Is the COOP at a different location?</label><br>

            <div id="divSecondAddress" style="display:none">
                <div class="">
                    <input class="form-control" id="txtStreet3" type="text" aria-label="Street Adress 1" placeholder="Street Adress 1" required>
                    <div class="invalid-feedback">Please enter an Street 1 </div>
                </div>
                <div class="">
                    <input class="form-control" id="txtStreet4" type="text" aria-label="Street Adress 2" placeholder="Street Adress 2" required>
                    <div class="invalid-feedback">Please enter an Street 2 </div>
                </div>
                <div class="">
                    <input class="form-control" id="txtCityC" type="text" aria-label="City" placeholder="City" required>
                    <div class="invalid-feedback">Please enter City </div>
                </div>
                <div class="">
                    <input class="form-control" id="txtStateC" type="text" aria-label="State" placeholder="State" required>
                    <div class="invalid-feedback">Please enter State </div>
                </div>
                <div class="">
                    <input class="form-control" id="txtZIPC" type="text" aria-label="ZIP Code" placeholder="ZIP Code" required>
                    <div class="invalid-feedback">Please enter a ZIP Code </div>
                </div>
            </div>
            <div class="d-flex">
                <div class="col-4 p-2">
                    <button class="btn btn-primary mt-1 d-flex justify-content-center" type="button" id="btnRegister">Create User</button>
                </div>
                <div class="col-4 p-2">
                    <button class="btn btn-primary mt-1 d-flex justify-content-center" type="button" id="btnToLogin">Login in?</button>
                </div>
            </div>
            </form>
        </div>
    </div>
    <div class="card col-6 offset-3 mt-5" style="display: none;" id="divLogin">
        <div class="card-header d-flex justify-content-center">
            <h3>Login</h3>
        </div>
        <div class="card-body">
            <form class="needs-validation" novalidate>
                <div class="mt-1">
                    <input class="form-control" id="txtEmail2" type="email" aria-label="Enter Email Address" placeholder="Email Address" required>
                    <div class="invalid-feedback">Invalid email address.</div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtPassword2" type="password" aria-label="Enter Password" placeholder="Password" required>
                    <div class="invalid-feedback">Invalid Password</div>
                </div>
                <div class="d-flex">
                    <div class="col-4 p-2">
                        <button class="btn btn-primary col-8 mt-2 p-2 d-inline" type="button" id="btnLogin">Login</button>
                    </div>
                    <div class="col-4 p-2">
                        <button class="btn btn-primary col-8 mt-2 p-2" type="button" id="btnGoRegister">Register Account</button>
                    </div>
                    <div class="col-4 p-2">
                        <button class="btn btn-primary col-8 mt-2 p-2" type="button" id="btnForgotPassword">Forgot Password</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="card col-6 offset-3 mt-5" style="display: none;" id="divForgotPassword">
        <div class="card-header d-flex justify-content-center">
            <h3>Forgot Password</h3>
        </div>
        <div class="card-body">
            <form class="needs-validation" novalidate>
                <div class="mt-1">
                    <input class="form-control" id="txtEmail3" type="email" aria-label="Enter Email Address" placeholder="Email Address" required>
                    <div class="invalid-feedback">Invalid email address.</div>
                </div>
                <div class="mt-1">
                    <input class="form-control" id="txtPassword3" type="password" aria-label="Enter Password" placeholder="Password" required>
                    <div class="invalid-feedback">Invalid Password</div>
                </div>
                <div class="d-flex">
                    <div class="col-4 p-2">
                        <button class="btn btn-primary col-8 mt-2 p-2 d-inline" type="button" id="btnResetPassword">Reset Password</button>
                    </div>
                    <div class="col-4 p-2">
                        <button class="btn btn-primary col-8 mt-2 p-2" type="button" id="btnBack">Back</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.1.min.js"   integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="   crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.6.0/dist/sweetalert2.all.min.js" integrity="sha256-m/sZMbDLng35+odvNDecxhKoxkVCYvbe83s22M79WgU=" crossorigin="anonymous"></script>
    
    <script>
        $('#btnToLogin').on('click', function() {
            $('#divRegister').slideToggle();
            $('#divLogin').slideToggle();
        })

        $('#btnGoRegister').on('click', function() {
            $('#divLogin').slideToggle();
            $('#divRegister').slideToggle();
        })

        $('#btnForgotPassword').on('click', function() {
            $('#divLogin').slideToggle();
            $('#divForgotPassword').slideToggle();
        })

        $('#btnBack').on('click',function(){
            $('#divForgotPassword').slideToggle();
            $('#divLogin').slideToggle();
        })


        $('#myCheck').on('click',function(){
            var checkBox = document.getElementById("myCheck");
            if (checkBox.checked == true){
                divSecondAddress.style.display = "block";
                $('#txtStreet3').removeClass('is-invalid');
                $('#txtStreet4').removeClass('is-invalid');
                $('#txtCityC').removeClass('is-invalid');
                $('#txtStateC').removeClass('is-invalid');
                $('#txtZIPC').removeClass('is-invalid');
                $('#txtStreet3').removeClass('is-valid');
                $('#txtStreet4').removeClass('is-valid');
                $('#txtCityC').removeClass('is-valid');
                $('#txtStateC').removeClass('is-valid');
                $('#txtZIPC').removeClass('is-valid');

            } else {
                divSecondAddress.style.display = "none";
                $('#txtStreet3').removeClass('is-invalid');
                $('#txtStreet4').removeClass('is-invalid');
                $('#txtCityC').removeClass('is-invalid');
                $('#txtStateC').removeClass('is-invalid');
                $('#txtZIPC').removeClass('is-invalid');
                $('#txtStreet3').removeClass('is-valid');
                $('#txtStreet4').removeClass('is-valid');
                $('#txtCityC').removeClass('is-valid');
                $('#txtStateC').removeClass('is-valid');
                $('#txtZIPC').removeClass('is-valid');
            }
        })

        $('#myCheck').on('click',function(){
            var checkBox = document.getElementById("myCheck");
            if (checkBox.checked == true){
                divSecondAddress.style.display = "block";
                $('#txtStreet3').removeClass('is-invalid');
                $('#txtStreet4').removeClass('is-invalid');
                $('#txtCityC').removeClass('is-invalid');
                $('#txtStateC').removeClass('is-invalid');
                $('#txtZIPC').removeClass('is-invalid');
                $('#txtStreet3').removeClass('is-valid');
                $('#txtStreet4').removeClass('is-valid');
                $('#txtCityC').removeClass('is-valid');
                $('#txtStateC').removeClass('is-valid');
                $('#txtZIPC').removeClass('is-valid');

            } else {
                divSecondAddress.style.display = "none";
                $('#txtStreet3').removeClass('is-invalid');
                $('#txtStreet4').removeClass('is-invalid');
                $('#txtCityC').removeClass('is-invalid');
                $('#txtStateC').removeClass('is-invalid');
                $('#txtZIPC').removeClass('is-invalid');
                $('#txtStreet3').removeClass('is-valid');
                $('#txtStreet4').removeClass('is-valid');
                $('#txtCityC').removeClass('is-valid');
                $('#txtStateC').removeClass('is-valid');
                $('#txtZIPC').removeClass('is-valid');
            }
        })

        $('#btnRegister').on('click',function(){
            function isValidPassword(strPasswordT){
                let regPassword = /^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[a-zA-Z]).{8,64}$/;
                return regPassword.test(strPasswordT);
            }

            let strEmail = $('#txtEmail').val();
            let strPassword = $('#txtPassword').val();
            let strFirstName = $('#txtFirstName').val();
            let strLastName = $('#txtLastName').val();
            let strStreet1 = $('#txtStreet1').val();
            let strStreet2 = $('#txtStreet2').val();
            let strCity = $('#txtCity').val();
            let strState = $('#txtState').val();
            let strZip = $('#txtZIP').val();
            let strCOOP = $('#txtCOOP').val();
            
            var checkBox = document.getElementById("myCheck");
            var passCheck = isValidPassword(strPassword);

            
            let strStreet3;
            let strStreet4;
            let strCityC;
            let strStateC;
            let strZipC;
            
            if (checkBox.checked == true) {
                strStreet3 = $('#txtStreet3').val();
                strStreet4 = $('#txtStreet4').val();
                strCityC = $('#txtCityC').val();
                strStateC = $('#txtStateC').val();
                strZipC = $('#txtZIPC').val();
            }
            else {
                strStreet3 = $('#txtStreet1').val();
                strStreet4 = $('#txtStreet2').val();
                strCityC = $('#txtCity').val();
                strStateC = $('#txtState').val();
                strZipC = $('#txtZIP').val();
            }
            
            let blnError =false;
            let strErrorMessage = '';
            let frmNewUser = document.querySelector('form');
            frmNewUser.reportValidity();
            
            if(!strEmail){
                blnError = true;
                $('#txtEmail').addClass('is-invalid');
            }
            else if(!frmNewUser.reportValidity()){
                $('txtEmail').addClass('is-invalid');
            }
            else {
                $('#txtEmail').removeClass('is-invalid');
                $('#txtEmail').addClass('is-valid');
            }
            if(passCheck == false){
                blnError = true;
                $('#txtPassword').addClass('is-invalid');
            }
            else {
                $('#txtPassword').removeClass('is-invalid');
                $('#txtPassword').addClass('is-valid');
            }
            if(!strFirstName){
                blnError = true;
                $('#txtFirstName').addClass('is-invalid');
            }
            else {
                $('#txtFirstName').removeClass('is-invalid');
                $('#txtFirstName').addClass('is-valid');
            }
            if(!strLastName){
                blnError = true;
                $('#txtLastName').addClass('is-invalid');
            }
            else {
                $('#txtLastName').removeClass('is-invalid');
                $('#txtLastName').addClass('is-valid');
            }
            if(!strStreet1){
                blnError = true;
                $('#txtStreet1').addClass('is-invalid');
            }
            else {
                $('#txtStreet1').removeClass('is-invalid');
                $('#txtStreet1').addClass('is-valid');
            }
            if(!strStreet2){
                blnError = true;
                $('#txtStreet2').addClass('is-invalid');
            }
            else {
                $('#txtStreet2').removeClass('is-invalid');
                $('#txtStreet2').addClass('is-valid');
            }
            if(!strCity){
                blnError = true;
                $('#txtCity').addClass('is-invalid');
            }
            else {
                $('#txtCity').removeClass('is-invalid');
                $('#txtCity').addClass('is-valid');
            }
            if(!strState){
                blnError = true;
                $('#txtState').addClass('is-invalid');
            }
            else {
                $('#txtState').removeClass('is-invalid');
                $('#txtState').addClass('is-valid');
            }
            if(!strZip){
                blnError = true;
                $('#txtZIP').addClass('is-invalid');
            }
            else {
                $('#txtZIP').removeClass('is-invalid');
                $('#txtZIP').addClass('is-valid');
            }
            if(!strCOOP) {
                blnError = true;
                $('#txtCOOP').addClass('is-invalid');
            }
            else {
                $('#txtCOOP').removeClass('is-invalid');
                $('#txtCOOP').addClass('is-valid');
            }
            if(!strStreet3 && checkBox.checked == true){
                blnError = true;
                $('#txtStreet3').addClass('is-invalid');
            }
            else {
                $('#txtStreet3').removeClass('is-invalid');
                $('#txtStreet3').addClass('is-valid');
            }
            if(!strStreet4 && checkBox.checked == true){
                blnError = true;
                $('#txtStreet4').addClass('is-invalid');
            }
            else {
                $('#txtStreet4').removeClass('is-invalid');
                $('#txtStreet4').addClass('is-valid');
            }
            if(!strCityC && checkBox.checked == true){
                blnError = true;
                $('#txtCityC').addClass('is-invalid');
            }
            else {
                $('#txtCityC').removeClass('is-invalid');
                $('#txtCityC').addClass('is-valid');
            }
            if(!strStateC && checkBox.checked == true){
                blnError = true;
                $('#txtStateC').addClass('is-invalid');
            }
            else {
                $('#txtStateC').removeClass('is-invalid');
                $('#txtStateC').addClass('is-valid');
            }
            if(!strZipC && checkBox.checked == true){
                blnError = true;
                $('#txtZIPC').addClass('is-invalid');
            }
            else {
                $('#txtZIPC').removeClass('is-invalid');
                $('#txtZIPC').addClass('is-valid');
            }
            if(blnError == false) {
                $('#divRegister').slideToggle();
                $('#divLogin').slideToggle();
            }
        })

        $('#btnLogin').on('click', function() {
            let strEmail2 = $('#txtEmail2').val()
            let strPassword2 = $('#txtPassword2').val()
            let blnError2 = false;
            let strErrorMessage = '';

            if ($('#txtEmail2').val().length < 1) {
                blnError2 = true;
                $('#txtEmail2').addClass('is-invalid');
            } else {
                $('#txtEmail2').removeClass('is-invalid');
                $('#txtEmail2').addClass('is-valid');
            }
            if ($('#txtPassword2').val().length < 1) {
                blnError2 = true;
                $('#txtPassword2').addClass('is-invalid');
            } else {
                $('#txtPassword2').removeClass('is-invalid');
                $('#txtPassword2').addClass('is-valid');
            }
            if(blnError2 == false) {
                $('#divRegister').slideToggle();   //TEMPORARY
                $('#divLogin').slideToggle();
            }
            //add Post later
            /*
            if (blnError == false) {
                $.post('https://www.swollenhippo.com/ReliableVehicles/api/sessions.php', {
                    email: strEmail2,
                    Password: strPassword2
                }).done(function(result) {
                    console.log(result);
                    const objResult = JSON.parse(result);
                    console.log(objResult);
                    if (objResult.SessionID) {
                        $('#txtEmail2').val('');
                        $('#txtPassword2').val('');
                        sessionStorage.setItem("SessionID", objResult.SessionID);
                        //$('#div').slideDown(); SLIDE TOGGLE MENU
                        //$('#divLogin').slideUp();

                    } else {
                        Swal.fire({
                            icon: 'error',
                            title: 'oh no',
                            text: 'Looks like your username or password were incorrect'
                        })
                    }

                })
            }
            */
        })

        $('#btnResetPassword').on('click', function() {
            let strEmail3 = $('#txtEmail3').val()
            let strPassword3 = $('#txtPassword3').val()
            let blnError3 = false;
            if ($('#txtEmail3').val().length < 1) {
                blnError3 = true;
                $('#txtEmail3').addClass('is-invalid');
            } else {
                $('#txtEmail3').removeClass('is-invalid');
                $('#txtEmail3').addClass('is-valid');
            }
            if ($('#txtPassword3').val().length < 1) {
                blnError3 = true;
                $('#txtPassword3').addClass('is-invalid');
            } else {
                $('#txtPassword3').removeClass('is-invalid');
                $('#txtPassword3').addClass('is-valid');
            }
            if(blnError3 == false) {
                $('#divForgotPassword').slideToggle();
                $('#divLogin').slideToggle();
            }
        })
    </script>
</body>

</html>
